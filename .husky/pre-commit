# æ£€æŸ¥å½“å‰åˆ†æ”¯æˆ–ç›®æ ‡åˆ†æ”¯æ˜¯å¦ä¸º main
current_branch=$(git symbolic-ref --short HEAD 2>/dev/null || echo "HEAD")

# å¦‚æœå½“å‰åˆ†æ”¯æ˜¯ mainï¼Œæˆ–è€…æ˜¯è¦åˆå¹¶åˆ° main çš„åˆ†æ”¯ï¼Œåˆ™æ‰§è¡Œæ£€æŸ¥
if [ "$current_branch" = "main" ] || git log --oneline --merges -1 | grep -q "Merge.*into main"; then
  echo "ğŸ” Checking build for main branch..."
  bunx lint-staged
else
  echo "â­ï¸  Skipping build check (not main branch: $current_branch)"
fi
